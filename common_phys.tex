% TODO: check the physics package. On first impression, there are many commands
% I don't like in the very form they're defined in this package, but it might
% be a good idea to reimplement sane version of them here.

\usepackage{xparse}

\ExplSyntaxOn

\cs_new:Npn \__wisper_keys_define_phys:n #1 { \keys_define:nn { wisper/phys } {#1} }
\cs_new:Npn \__wisper_keys_set_phys:n #1 { \keys_set:nn { wisper/phys } {#1} }
\cs_new_eq:NN \PhysStyle \__wisper_keys_set_phys:n

\ExplSyntaxOff

% Don't rewrite things that already exist [[[1
% Use \verb|siunitx| to properly format numerical quantities.
\usepackage{siunitx}
\sisetup{%
  %locale=DE,
  separate-uncertainty = true,
  exponent-product = \cdot,
  range-units = brackets,
}

% Typeset istope symbols
\usepackage{isotope}
% silence compatibility warning by specifying a version.
\usepackage[version=4]{mhchem}
\providecommand\isomerslash{\textnormal{ / }\allowbreak}
\providecommand\isomer[1]{\cesplit{{\/}{\c{isomerslash}}}{#1}}

% dirac notation
\ExplSyntaxOn
% save the Set macro from common_math and restore after braket has overwritten it
% TODO: rewrite to get rid of these hacks
\cs_gset_eq:NN \__wisper_set_save \Set
\cs_gset_eq:Nc \__wisper_set_save_aux { Set~ }
\usepackage{braket}
\cs_gset_eq:NN \Set \__wisper_set_save
\cs_gset_eq:cN { Set~ } \__wisper_set_save_aux
\cs_undefine:N \set
\cs_undefine:c { set~ }
\ExplSyntaxOff


% Electrodynamics [[[1
\newcommand{\epz}{\epsilon_0}
\newcommand{\muz}{\mu_0}
\newcommand{\epr}{\epsilon_r}
\newcommand{\mur}{\mu_r}

% Lagrange and Hamilton formalism [[[1
\newcommand{\lagr}{\mathcal{L}}
\newcommand{\hmlt}{\mathcal{H}}


% general quantum theory [[[1
\ExplSyntaxOn
\DeclarePairedDelimiterX \Comm[2] \lbrack \rbrack
  { \__wisper_argument_or_empty:n {#1}, \__wisper_argument_or_empty:n {#2} }
\ExplSyntaxOff

\newcommand{\paulimx}{\begin{pmatrix}0 & 1 \\ 1 & 0\end{pmatrix}}
\newcommand{\paulimy}{\begin{pmatrix}-i & 0 \\ 0 & i\end{pmatrix}}
\newcommand{\paulimz}{\begin{pmatrix}1 & 0 \\ 0 & -1\end{pmatrix}}

% vim: ts=4 sw=4 et fdm=marker fmr=[[[,]]]:
